<!-- <div class="cc_cafe_grid">
  {% for cafe in cafes %}
    <div class="cc_card">
      {% if cafe.google_photo_url %}
        <img class="cc_card_img" src="{{ cafe.google_photo_url }}" alt="{{ cafe.crawled_store_name|default:cafe.public_store_name }}">
      {% else %}
        <div style="height:180px;display:flex;align-items:center;justify-content:center;border:1px dashed #ddd;border-radius:8px;margin-bottom:10px;">
          <small>사진 없음</small>
        </div>
      {% endif %}

      <h3 class="cc_card_title">{{ cafe.crawled_store_name|default:cafe.public_store_name }}</h3>
      <p class="cc_card_address">{{ cafe.address }}</p>
      <p class="cc_card_rating">★ {{ cafe.rating|default:"-" }}</p>
    </div>
  {% empty %}
    <p>추천 카페가 없습니다.</p>
  {% endfor %}
</div> -->

<div class="cc_cafe_grid">
  {% for cafe in cafes %}
    {% with name=cafe.crawled_store_name|default:cafe.public_store_name %}
    {% with address=cafe.address|default:"" %}
    {% with q=name|add:" "|add:address %}

      <a class="cc_card"
         href="https://map.naver.com/v5/search/{{ q|urlencode }}"
         target="_blank"
         rel="noopener noreferrer"
         referrerpolicy="no-referrer"
         style="text-decoration:none; color:inherit; display:block;">

        {% if cafe.google_photo_url %}
          <img class="cc_card_img"
               src="{{ cafe.google_photo_url }}"
               alt="{{ name }}">
        {% else %}
          <div style="height:180px;display:flex;align-items:center;justify-content:center;border:1px dashed #ddd;border-radius:8px;margin-bottom:10px;">
            <small>사진 없음</small>
          </div>
        {% endif %}

        <h3 class="cc_card_title">{{ name }}</h3>
        <p class="cc_card_address">{{ address }}</p>
        <p class="cc_card_rating">★ {{ cafe.rating|default:"-" }}</p>
      </a>

    {% endwith %}
    {% endwith %}
    {% endwith %}
  {% empty %}
    <p>추천 카페가 없습니다.</p>
  {% endfor %}
</div>